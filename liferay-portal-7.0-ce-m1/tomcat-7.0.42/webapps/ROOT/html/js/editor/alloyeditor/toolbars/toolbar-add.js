YUI.add("toolbar-add",function(t){"use strict";var o,e=t.Lang,i=t.Node,n=t.Base.create("toolbaradd",t.Widget,[t.ToolbarBase,t.WidgetPosition,t.WidgetPositionConstrain,t.WidgetAutohide],{initializer:function(){var o;o=t.one(this.get("editor").element.$),this._hideButtonsContainerFn=CKEDITOR.tools.debounce(this._hideButtonsContainer,this.get("hideTimeout")),this._editorDOMNode=o.getDOMNode()},bindUI:function(){var t,o;this._addButton.on(["click","mouseenter"],this._showButtonsContainer,this),t=this.get("boundingBox"),o=this._buttonsOverlay.get("boundingBox"),t.on("mouseleave",this._handleMouseLeave,this),o.on("mouseleave",this._handleMouseLeave,this),t.on("mouseenter",this._handleMouseEnter,this),o.on("mouseenter",this._handleMouseEnter,this)},destructor:function(){this._addButton.destroy(),this._buttonsOverlay.destroy(),this._hideButtonsContainerFn.cancel()},renderUI:function(){this._renderAddNode(),this._renderButtonsOverlay()},showAtPoint:function(t,o){var e,i;this._hideButtonsContainer(),this.get("visible")||this.show(),e=this._addContentBtnContainer.getDOMNode(),i=this.get("gutter"),this.set("xy",this.getConstrainedXY([t-e.offsetWidth-i.left,o-i.top-e.offsetHeight/2]))},_alignButtonsOverlay:function(){this._buttonsOverlay.align(this._addContentBtnContainer,[t.WidgetPositionAlign.TL,t.WidgetPositionAlign.TR])},_handleMouseEnter:function(){this._hideButtonsContainerFn.cancel()},_handleMouseLeave:function(){this._hideButtonsContainerFn.cancel(),this._hideButtonsContainerFn()},_hideButtonsContainer:function(){this._buttonsOverlay.hide()},_onEditorInteraction:function(t){var o,e,i;e=t.data.selectionData,e.region?(i=e.region.startRect||e.region,o=this._editorNode.getX(),this.showAtPoint(o,e.region.top+i.height/2)):this.hide()},_renderAddNode:function(){var o,n,s;n=i.create(e.sub(this.TPL_ADD,{content:this.TPL_ADD_CONTENT})),o=new t.Button({srcNode:n.one(".btn-add")}).render(n),s=this.get("contentBox"),s.appendChild(n),this._addButton=o,this._addContentBtnContainer=this.get("boundingBox").one(".alloy-editor-toolbar-buttons")},_renderButtonsOverlay:function(){var t;t=i.create(this.TPL_BUTTONS_CONTAINER),this._buttonsOverlay=new o({render:!0,visible:!1,zIndex:1}),this._buttonsOverlay.get("contentBox").appendChild(t),this._buttonsContainer=t},_showButtonsContainer:function(){this._buttonsOverlay.show(),this._alignButtonsOverlay()},BOUNDING_TEMPLATE:'<div class="alloy-editor-toolbar alloy-editor-toolbar-add"></div>',CONTENT_TEMPLATE:'<div class="alloy-editor-toolbar-content btn-toolbar"></div>',TPL_ADD:'<div class="alloy-editor-toolbar-buttons btn-group"><button type="button" class="alloy-editor-button btn btn-add">{content}</button></div>',TPL_ADD_CONTENT:'<i class="alloy-editor-icon-add"></i>',TPL_BUTTONS_CONTAINER:'<div class="alloy-editor-toolbar-buttons btn-group btn-group-vertical"></div>'},{ATTRS:{buttons:{validator:e.isArray,value:["image","code"]},constrain:{validator:e.isBoolean,value:!0},gutter:{validator:e.isObject,value:{left:5,top:0}},hideTimeout:{validator:e.isNumber,value:1e3}}});t.ToolbarAdd=n,o=t.Base.create("toolbaradditems",t.Widget,[t.WidgetPosition,t.WidgetPositionAlign,t.WidgetAutohide],{BOUNDING_TEMPLATE:'<div class="alloy-editor-toolbar alloy-editor-toolbar-add-items"></div>',CONTENT_TEMPLATE:'<div class="alloy-editor-toolbar-content btn-toolbar"></div>'},{})},"0.1",{requires:["widget-base","widget-position","widget-position-constrain","widget-position-align","widget-autohide","toolbar-base"]});