YUI.add("toolbar-styles",function(t){"use strict";var o=t.Lang,e=t.Node,i=t.Base.create("toolbarstyles",t.Widget,[t.WidgetPosition,t.WidgetAutohide,t.WidgetPositionConstrain,t.ToolbarBase],{renderUI:function(){var t,o,i=this;t=e.create(i.TPL_BUTTONS_CONTAINER),o=this.get("contentBox"),o.appendChild(t),i._buttonsContainer=t},showAtPoint:function(t,o,e){var i,a,r;i=this.get("boundingBox"),e===CKEDITOR.SELECTION_TOP_TO_BOTTOM?i.replaceClass("alloy-editor-arrow-box-bottom","alloy-editor-arrow-box-top"):i.replaceClass("alloy-editor-arrow-box-top","alloy-editor-arrow-box-bottom"),r=this.get("visible"),r||this.show(),a=this._getToolbarXYPoint(t,o,e),this._moveToPoint(this.getConstrainedXY(a),e,{visible:r})},_calculatePosition:function(t,o){var e,i,a,r,n;return e=t.region.direction,i=t.region.endRect,a=t.region.startRect,i&&i&&a.top===i.top&&(e=CKEDITOR.SELECTION_BOTTOM_TO_TOP),o.x&&o.y?(r=this._getXPoint(t,o.x),n=e===CKEDITOR.SELECTION_BOTTOM_TO_TOP?Math.min(o.y,t.region.top):Math.max(o.y,t.region.bottom)):(r=t.region.left+t.region.width/2,n=e===CKEDITOR.SELECTION_TOP_TO_BOTTOM?t.region.endRect.bottom:t.region.startRect.top),{direction:e,x:r,y:n}},_getToolbarXYPoint:function(t,o,e){var i,a;return i=this.get("boundingBox").getDOMNode(),a=this.get("gutter"),t=t-a.left-i.offsetWidth/2,e===CKEDITOR.SELECTION_TOP_TO_BOTTOM?o+=a.top:o=o-i.offsetHeight-a.top,[t,o]},_getXPoint:function(t,o){var e,i,a,r,n,s;return a=t.region,e=a.startRect?a.startRect.left:a.left,r=a.endRect?a.endRect.right:a.right,o>e&&r>o?s=o:(i=Math.abs(e-o),n=Math.abs(r-o),s=n>i?e:r),s},_onEditorInteraction:function(t){var o,e,i,a,r;o=this.get("editor"),a=o.isSelectionEmpty(),i=t.data.selectionData,r=t.data.nativeEvent,i.element||!i.region||a?this.hide():(e=this._calculatePosition(i,{x:r.pageX,y:r.pageY}),this.showAtPoint(e.x,e.y,e.direction))},BOUNDING_TEMPLATE:'<div class="alloy-editor-toolbar alloy-editor-toolbar-styles alloy-editor-arrow-box"></div>',CONTENT_TEMPLATE:'<div class="alloy-editor-toolbar-content btn-toolbar"></div>',TPL_BUTTONS_CONTAINER:'<div class="btn-group alloy-editor-toolbar-buttons"></div>'},{ATTRS:{buttons:{validator:o.isArray,value:["strong","em","u","h1","h2","a","twitter"]},constrain:{validator:o.isBoolean,value:!0},gutter:{validator:o.isObject,value:{left:0,top:10}}}});t.ToolbarStyles=i},"",{requires:["toolbar-base","widget-base","widget-position","widget-position-constrain","widget-autohide"]});